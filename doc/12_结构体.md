# 1、类型定义、类型别名

类型定义相当于定义了一个全新的类型，与之前的类型不同。但是类型别名并没有定义一个新的类型，而是使用一个别名来替换之前的类型。

类型别名只会在代码中存在，编译完成之后并不会存在该别名。

因为类型别名和原来的类型是一致的，所以原来类型所拥有的方法，类型别名中也可以调用，但是如果是重新定义的一个类型，那么不可以调用之前的任何方法。

__Command:__ `type NewType Type`

__Example:__ 

```go
package main

import "fmt"

func main() {
	// 类型定义
	type MyInt int
	var i MyInt
	i = 100
	fmt.Printf("i(%T): %v\n", i, i) // i(main.MyInt): 100

	// 类型别名
	type MyString = string
	var s MyString
	s = "Tom"
	fmt.Printf("s(%T): %v\n", s, s) // s(string): Tom
}
```





# 2、结构体

Go 语言没有面向对象的概念，但是可以用结构体来实现面向对象的一些特性，例如：继承、组合等特性。

Go 语言中数组可以存储同一类型的数据，但在结构体中我们可以为不同项定义不同的数据类型。

结构体是由一系列具有相同类型或不同类型的数据构成的数据集合。

结构体表示一项记录，比如保存图书馆的书籍记录，每本书有以下属性：

- Title：标题
- Author：作者
- Subject：学科
- ID：书籍 ID

## 3.1 定义结构体

结构体定义需要使用 type 和 struct 语句。struct 语句定义一个新的数据类型，结构体中有一个或多个成员。type 语句设定了结构体的名称。

__Command:__ 

```go
type struct_variable_type struct {
   member definition
   member definition
   ...
   member definition
}
```

一旦定义了结构体类型，它就能用于变量的声明。

__Command:__ 

```go
variable_name := structure_variable_type {value1, value2...valuen}
或
variable_name := structure_variable_type { key1: value1, key2: value2..., keyn: valuen}
```

__Example:__ 

```go
package main

import "fmt"

// 定义结构体
type Books struct {
	title  string
	author string
	bookid int
}

func main() {
	// 创建结构体
	book1 := Books{"Python", "Tom", 001}
	fmt.Printf("book1(%T): %v\n", book1, book1) // book1(main.Books): {Python Tom 1}

	// 也可以使用 key => value 格式
	book2 := Books{title: "Go", author: "Jerry", bookid: 002}
	fmt.Printf("book2(%T): %v\n", book2, book2) // book2(main.Books): {Go Jerry 2}

	// 忽略的字段为 0 或 空(只能使用key value格式的才可以忽略)
	book3 := Books{title: "Java"}
	fmt.Printf("book3(%T): %v\n", book3, book3) // book3(main.Books): {Java  0}
}
```

## 3.2 访问结构体成员

如果要访问结构体成员，需要使用点号 `.` 操作符，格式为：`structname.member`

__Example:__ 

```go
package main

import "fmt"

type Books struct {
	title   string
	author  string
	subject string
	book_id int
}

/*
func printBook(book Books) {
	fmt.Printf("Book title: %s\n", book.title)
	fmt.Printf("Book author: %s\n", book.author)
	fmt.Printf("Book subject: %s\n", book.subject)
	fmt.Printf("Book book_id: %d\n", book.book_id)
}
*/

func printBook(book *Books) {
	fmt.Printf("Book title: %s\n", book.title)
	fmt.Printf("Book author: %s\n", book.author)
	fmt.Printf("Book subject: %s\n", book.subject)
	fmt.Printf("Book book_id: %d\n", book.book_id)
}

func main() {
	var Book1 Books // 声明 Book1 为 Books 类型
	var Book2 Books // 声明 Book2 为 Books 类型

	// book 1 描述
	Book1.title = "Go 语言"
	Book1.author = "Yannic"
	Book1.subject = "Go 语言教程"
	Book1.book_id = 6495407

	// book 2 描述
	Book2.title = "Python 语言"
	Book2.author = "Jerry"
	Book2.subject = "Python 语言教程"
	Book2.book_id = 6495700

	// 打印Book1信息
	// printBook(Book1)
	printBook(&Book1)

	// 打印Book2信息
	// printBook(Book2)
	printBook(&Book2)
}
```

## 3.3 匿名结构体

如果结构体是临时使用，可以不用起名字直接使用。

__Example:__ 

```go
package main

import "fmt"

func main() {
	var student struct {
		id   int
		name string
	}
	student.id = 001
	student.name = "Tom"

	fmt.Printf("student: %v\n", student) // student: {1 Tom}
}
```

## 3.4 结构体指针

```go
package main

import (
	"fmt"
)

func main() {
	type person struct {
		id   int
		name string
		age  int
	}

	tom := person{001, "Tom", 22}

	var p_person *person

	p_person = &tom
	fmt.Printf("p_person: %p\n", p_person)   // p_person: 0xc000028040
	fmt.Printf("*p_person: %v\n", *p_person) // *p_person: {1 Tom 22}

}
```

使用 new 关键字定义结构体指针。

__Example:__ 

```go
package main

import (
	"fmt"
)

func main() {
	type person struct {
		id   int
		name string
		age  int
	}

	var tom = new(person)

	tom.id = 001
	tom.name = "Tom"
	tom.age = 22

	fmt.Printf("tom: %p\n", tom)   // tom: 0xc0000b6000
	fmt.Printf("*tom: %v\n", *tom) // *tom: {1 Tom 22}
}
```

## 3.5 做函数参数

Go 语言结构体可以像普通变量一样，做为函数参数传递给函数。

- 直接传递结构体，是副本（拷贝）
- 传递结构体指针，可改变结构体

```go
package main

import (
	"fmt"
)

type person struct {
	id   int
	name string
	age  int
}

func showPerson(per person) {
	per.id = 001
	per.name = "Tom"
	per.age = 22
	fmt.Printf("per: %v\n", per)
}

func showPer(per *person) {
	per.id = 001
	per.name = "Tom"
	per.age = 22
	fmt.Printf("per: %v\n", *per)
}

func main() {
	tom := person{001, "Yannic", 18}
	fmt.Printf("tom: %v\n", tom) // tom: {1 Yannic 18}
	showPerson(tom)              // per: {1 Tom 22}
	fmt.Printf("tom: %v\n", tom) // tom: {1 Yannic 18}
	showPer(&tom)                // per: {1 Tom 22}
	fmt.Printf("tom: %v\n", tom) // tom: {1 Tom 22}
}
```

## 3.6 结构体嵌套

Go 语言没有面向对象编程思想，但是可以通过结构体嵌套来实现这种效果。

__Example:__ 

```go
package main

import (
	"fmt"
)

type Dog struct {
	name  string
	color string
	age   int
}

type Person struct {
	name string
	dog  Dog
}

func main() {
	dog := Dog{"mimi", "black", 2}
	tom := Person{"Tom", dog}

	fmt.Printf("tom: %v\n", tom)                   // tom: {Tom {mimi black 2}}
	fmt.Printf("tom.dog.name: %v\n", tom.dog.name) // tom.dog.name: mimi
}
```

